---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import Timeline from "../components/Timeline.jsx";
import { getCollection } from "astro:content";

// Fetch all blog posts
const posts = (await getCollection("blog")).sort(
  (a, b) =>
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
); // oldest → newest
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />

    <main>
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-content">
          <h1>Francis Roy’s Journey</h1>
          <p>
            Welcome to our family’s space where we share updates, milestones,
            and reflections on Francis’s health journey. From the early
            challenges to the everyday joys, this journal is our way of
            documenting God’s grace and the love surrounding him.
          </p>
          <a class="cta" href="/blog/">Read the Journey</a>
        </div>
        <div class="hero-image">
          <img src="/images/francis-hero.jpg" alt="Francis Roy" />
        </div>
      </section>

      <section class="timeline-section">
        <h2>Journey Updates</h2>
        <div class="timeline-wrapper">
          <Timeline client:only="react" posts={posts} />
        </div>
      </section>
    </main>

    <Footer />
  </body>
</html>

<style>
  main {
    display: flex;
    flex-direction: column;
    gap: 4rem;
  }

  .hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    padding: 4rem 2rem;
    gap: 2rem;
    background-color: #f7f3fc;
  }

  .hero-content h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #4a148c;
  }

  .hero-content p {
    font-size: 1.2rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    color: #333;
  }

  .cta {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background-color: #6b46c1;
    color: white;
    text-decoration: none;
    border-radius: 0.5rem;
    font-weight: 600;
  }

  .cta:hover {
    background-color: #553c9a;
  }

  .hero-image img {
    width: 100%;
    border-radius: 1rem;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  }

  .timeline-wrapper {
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
  }

  .timeline-section {
    padding: 2rem;
    background: white;
  }

  .timeline-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #4a148c;
  }

  @media (max-width: 768px) {
    .hero {
      grid-template-columns: 1fr;
      text-align: center;
    }
    .hero-image {
      order: -1;
    }
  }
  
</style>
